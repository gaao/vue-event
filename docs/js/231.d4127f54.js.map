{"version":3,"file":"js/231.d4127f54.js","mappings":"8JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,UAAU,CAACA,EAAG,MAAM,CAACG,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACJ,EAAG,OAAO,CAACF,EAAIO,GAAG,YAAYL,EAAG,MAAM,CAAEF,EAAIQ,OAAQN,EAAG,MAAM,CAACG,MAAM,CAAC,IAAML,EAAIQ,OAAO,IAAM,WAAWR,EAAIS,KAAKP,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,QAAQ,CAACQ,IAAI,SAASC,YAAY,CAAC,QAAU,QAAQN,MAAM,CAAC,KAAO,OAAO,OAAS,WAAWO,GAAG,CAAC,OAASZ,EAAIa,gBAAgBX,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAU,KAAO,gBAAgBO,GAAG,CAAC,MAAQZ,EAAIc,YAAY,CAACd,EAAIO,GAAG,UAAWP,EAAIe,mBAAoBb,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,UAAU,KAAO,kBAAkBO,GAAG,CAAC,MAAQZ,EAAIgB,iBAAiB,CAAChB,EAAIO,GAAG,WAAWP,EAAIS,MAAM,QAAQ,EACxsB,EACGQ,EAAkB,G,UC6BtB,GACAC,KAAAA,aACAC,OACA,OACAX,OAAAA,KAAAA,OAAAA,MAAAA,SAAAA,SACAO,oBAAAA,EAEA,EACAK,QAAAA,CACAN,YACA,0BAEAO,QAAAA,IAAAA,KACA,EACAR,aAAAA,GACAQ,QAAAA,IAAAA,MACA,uBACA,gBACAA,QAAAA,IAAAA,YACA,CACAA,QAAAA,IAAAA,QAAAA,EAAAA,IAKA,uBACAC,EAAAA,cAAAA,EAAAA,IACAA,EAAAA,OAAAA,IACA,4BACA,2BACA,YAEA,CACA,EACA,uBAGA,GAFAD,QAAAA,IAAAA,YAAAA,KAAAA,QAEA,aACA,MAAAF,KAAAA,SAAA,qBAEA,GADAE,QAAAA,IAAAA,MAAAA,GACA,iDACA,iCACA,2BAEA,yCACA,CACA,IC7EmQ,I,UCO/PE,GAAY,OACd,EACAxB,EACAkB,GACA,EACA,KACA,KACA,MAIF,EAAeM,EAAiB,O","sources":["webpack://vue-event/./src/views/user/UserAvatar.vue","webpack://vue-event/src/views/user/UserAvatar.vue","webpack://vue-event/./src/views/user/UserAvatar.vue?6ccb","webpack://vue-event/./src/views/user/UserAvatar.vue?36d9"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"更换头像\")])]),_c('div',[(_vm.avatar)?_c('img',{attrs:{\"src\":_vm.avatar,\"alt\":\"这里是个图\"}}):_vm._e(),_c('div',{staticClass:\"btn-box\"},[_c('input',{ref:\"iptRef\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.onFideChange}}),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.chooseImg}},[_vm._v(\"选择照片\")]),(_vm.updateAvatarIsShow)?_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-upload\"},on:{\"click\":_vm.updateAvatarFn}},[_vm._v(\"上传头像 \")]):_vm._e()],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <el-card>\n      <div slot=\"header\">\n        <span>更换头像</span>\n        <!-- <el-button v-if=\"isEdit\" style=\"float: right; padding: 3px 0\" type=\"text\" icon=\"el-icon-edit\" @click=\"editInfo\">\n          编辑</el-button>\n        <el-button v-else style=\"float: right; padding: 3px 0\" type=\"text\" icon=\"el-icon-refresh-left\"\n          @click=\"cancelEditInfo\">\n          取消</el-button> -->\n      </div>\n      <div>\n        <!-- <el-upload class=\"upload-demo\" drag action=\"https://jsonplaceholder.typicode.com/posts/\" multiple>\n          <i class=\"el-icon-upload\"></i>\n          <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n          <div class=\"el-upload__tip\" slot=\"tip\">只能上传 jpg/png 文件，且不超过 500kb</div>\n        </el-upload> -->\n        <img v-if=\"avatar\" :src=\"avatar\" alt=\"这里是个图\" />\n        <!-- <img v-else :src=\"avatar\" alt=\"这里是个图\" /> -->\n        <div class=\"btn-box\">\n          <input type=\"file\" accept=\"image/*\" style=\"display: none;\" ref=\"iptRef\" @change=\"onFideChange\" />\n          <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"chooseImg\">选择照片</el-button>\n          <el-button type=\"success\" icon=\"el-icon-upload\" v-if=\"updateAvatarIsShow\" @click=\"updateAvatarFn\">上传头像\n          </el-button>\n        </div>\n      </div>\n    </el-card>\n  </div>\n</template>\n<script>\nimport { updateUserAvatarAPI } from '@/api'\nexport default {\n  name: 'UserAvatar',\n  data() {\n    return {\n      avatar: this.$store.state.userInfo.user_pic,\n      updateAvatarIsShow: false\n    }\n  },\n  methods: {\n    chooseImg() {\n      this.$refs.iptRef.click()\n      // console.log('移花接木', this.$refs.iptRef.click())\n      console.log(1111)\n    },\n    onFideChange(e) {\n      console.log(2222)\n      const files = e.target.files\n      if (files.length === 0) {\n        console.log('kong')\n      } else {\n        console.log('files', files[0])\n        // 把图片文件给到 img 标签的 src 上\n        // 方法一、链接地址 (本地连接不能作为传给后台)\n        // this.avatar = URL.createObjectURL(files[0])\n        // 方法二、base64 字符串\n        const fr = new FileReader()\n        fr.readAsDataURL(files[0])\n        fr.onload = e => {\n          this.avatar = e.target.result\n          this.updateAvatarIsShow = true\n          return this.avatar\n        }\n      }\n    },\n    async updateAvatarFn() {\n      console.log('头像 base64', this.avatar)\n      // console.log('updateUserAvatarAPI', updateUserAvatarAPI())\n      if (this.avatar) {\n        const { data: res } = await updateUserAvatarAPI(this.avatar)\n        console.log('res', res)\n        if (res.code !== 0) return this.$message.error(res.message)\n        this.$message.success(res.message)\n        this.updateAvatarIsShow = false\n        // vuex 重新获取下用户信息\n        this.$store.dispatch('getUserInfoAction')\n      }\n    }\n\n  }\n}\n</script>\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserAvatar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserAvatar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserAvatar.vue?vue&type=template&id=66871140&\"\nimport script from \"./UserAvatar.vue?vue&type=script&lang=js&\"\nexport * from \"./UserAvatar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","avatar","_e","ref","staticStyle","on","onFideChange","chooseImg","updateAvatarIsShow","updateAvatarFn","staticRenderFns","name","data","methods","console","fr","component"],"sourceRoot":""}