{"version":3,"file":"js/208.5cd30307.js","mappings":"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","sources":["webpack://vue-event/./src/views/user/UserInfo.vue","webpack://vue-event/src/views/user/UserInfo.vue","webpack://vue-event/./src/views/user/UserInfo.vue?07cb","webpack://vue-event/./src/views/user/UserInfo.vue?c881"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('el-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"基本资料\")]),(_vm.isEdit)?_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.editInfo}},[_vm._v(\" 编辑\")]):_c('el-button',{staticStyle:{\"float\":\"right\",\"padding\":\"3px 0\"},attrs:{\"type\":\"text\",\"icon\":\"el-icon-refresh-left\"},on:{\"click\":_vm.cancelEditInfo}},[_vm._v(\" 取消\")])],1),_c('div',[_c('el-form',{ref:\"userInfoRef\",attrs:{\"model\":_vm.userInfo,\"rules\":_vm.userInforules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"登录名称\",\"prop\":\"username\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.userInfo.username),callback:function ($$v) {_vm.$set(_vm.userInfo, \"username\", $$v)},expression:\"userInfo.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户昵称\",\"prop\":\"nickname\"}},[_c('el-input',{attrs:{\"disabled\":_vm.isEdit,\"clearable\":\"\"},model:{value:(_vm.userInfo.nickname),callback:function ($$v) {_vm.$set(_vm.userInfo, \"nickname\", $$v)},expression:\"userInfo.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户邮箱\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"disabled\":_vm.isEdit,\"clearable\":\"\"},model:{value:(_vm.userInfo.email),callback:function ($$v) {_vm.$set(_vm.userInfo, \"email\", $$v)},expression:\"userInfo.email\"}})],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit),expression:\"!isEdit\"}]},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.changeSubFn}},[_vm._v(\"提交修改\")])],1)],1)],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <el-card>\n      <div slot=\"header\">\n        <span>基本资料</span>\n        <el-button v-if=\"isEdit\" style=\"float: right; padding: 3px 0\" type=\"text\" icon=\"el-icon-edit\" @click=\"editInfo\">\n          编辑</el-button>\n        <el-button v-else style=\"float: right; padding: 3px 0\" type=\"text\" icon=\"el-icon-refresh-left\"\n          @click=\"cancelEditInfo\">\n          取消</el-button>\n      </div>\n      <div>\n        <el-form :model=\"userInfo\" :rules=\"userInforules\" ref=\"userInfoRef\" label-width=\"100px\">\n          <el-form-item label=\"登录名称\" prop=\"username\">\n            <el-input v-model=\"userInfo.username\" disabled></el-input>\n          </el-form-item>\n          <el-form-item label=\"用户昵称\" prop=\"nickname\">\n            <el-input v-model=\"userInfo.nickname\" :disabled=\"isEdit\" clearable></el-input>\n          </el-form-item>\n          <el-form-item label=\"用户邮箱\" prop=\"email\">\n            <el-input v-model=\"userInfo.email\" :disabled=\"isEdit\" clearable></el-input>\n          </el-form-item>\n          <el-form-item v-show=\"!isEdit\">\n            <!-- <el-button @click=\"resetAsNull\">重置</el-button> -->\n            <el-button type=\"primary\" @click=\"changeSubFn\">提交修改</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </el-card>\n  </div>\n</template>\n<script>\n// import { mapGetters } from 'vuex'\nimport { putUserInfoAPI } from '@/api'\nexport default {\n  data() {\n    return {\n      userInfo: {\n        id: this.$store.state.userInfo.id,\n        username: this.$store.state.userInfo.username,\n        nickname: this.$store.state.userInfo.nickname,\n        email: this.$store.state.userInfo.email\n      },\n      userInforules: {\n        nickname: [\n          { required: true, message: '请输入昵称', trigger: 'blur' },\n          { pattern: /^\\S{1,10}$/, message: '1-10 位非空格字符', trigger: 'blur' }\n        ],\n        email: [\n          { required: true, message: '请输入用户邮箱', trigger: 'blur' },\n          // { pattern: /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/, message: '必须符合邮箱格式', trigger: 'blur' }\n          { type: 'email', message: '必须符合邮箱格式', trigger: 'blur' }\n        ]\n      },\n      isEdit: true\n    }\n  },\n  // computed: {\n  //   ...mapGetters(['id'])\n  // },\n  methods: {\n    changeSubFn() {\n      this.$refs.userInfoRef.validate(async (val) => {\n        console.log('val', val)\n        console.log('userInfo', this.userInfo)\n        if (val) {\n          // this.userInfo.id = this.$store.state.userInfo.id   //放 data 里去赋值了\n          const { data: res } = await putUserInfoAPI(this.userInfo)\n          console.log('res', res)\n          if (res.code !== 0) return this.$message.error(res.message)\n          this.$message.success(res.message)\n          // 重新让 vuex 获取下最新的用户数据\n          this.$store.dispatch('getUserInfoAction')\n        }\n      })\n      console.log(1212)\n    },\n    editInfo() {\n      this.isEdit = !this.isEdit\n    },\n    cancelEditInfo() {\n      this.userInfo = this.$store.state.userInfo\n      this.isEdit = !this.isEdit\n    }\n    // resetAsNull() {\n    //   // this.userInfo.nickname = ''\n    //   // this.userInfo.email = ''\n    //   // 表单重置，恢复到原来的值，和绑定的值赋空值效果不一样\n    //   this.$refs.userInfoRef.resetFields()\n    // }\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.container {\n  // min-height: calc(100vh -120px) !important;\n  // min-height: 70vh;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserInfo.vue?vue&type=template&id=8c12a614&scoped=true&\"\nimport script from \"./UserInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./UserInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserInfo.vue?vue&type=style&index=0&id=8c12a614&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c12a614\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","isEdit","staticStyle","on","editInfo","cancelEditInfo","ref","userInfo","userInforules","model","value","username","callback","$$v","$set","expression","nickname","email","directives","name","rawName","changeSubFn","staticRenderFns","data","id","required","message","trigger","pattern","type","methods","console","component"],"sourceRoot":""}