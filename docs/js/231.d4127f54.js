"use strict";(self["webpackChunkvue_event"]=self["webpackChunkvue_event"]||[]).push([[231],{5231:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("el-card",[e("div",{attrs:{slot:"header"},slot:"header"},[e("span",[t._v("更换头像")])]),e("div",[t.avatar?e("img",{attrs:{src:t.avatar,alt:"这里是个图"}}):t._e(),e("div",{staticClass:"btn-box"},[e("input",{ref:"iptRef",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.onFideChange}}),e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.chooseImg}},[t._v("选择照片")]),t.updateAvatarIsShow?e("el-button",{attrs:{type:"success",icon:"el-icon-upload"},on:{click:t.updateAvatarFn}},[t._v("上传头像 ")]):t._e()],1)])])],1)},o=[],n=a(7877),r={name:"UserAvatar",data(){return{avatar:this.$store.state.userInfo.user_pic,updateAvatarIsShow:!1}},methods:{chooseImg(){this.$refs.iptRef.click(),console.log(1111)},onFideChange(t){console.log(2222);const e=t.target.files;if(0===e.length)console.log("kong");else{console.log("files",e[0]);const t=new FileReader;t.readAsDataURL(e[0]),t.onload=t=>(this.avatar=t.target.result,this.updateAvatarIsShow=!0,this.avatar)}},async updateAvatarFn(){if(console.log("头像 base64",this.avatar),this.avatar){const{data:t}=await(0,n.fo)(this.avatar);if(console.log("res",t),0!==t.code)return this.$message.error(t.message);this.$message.success(t.message),this.updateAvatarIsShow=!1,this.$store.dispatch("getUserInfoAction")}}}},i=r,l=a(1001),c=(0,l.Z)(i,s,o,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=231.d4127f54.js.map